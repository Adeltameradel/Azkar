import datetime
import requests
import textwrap
import os

# ุงุณุชุฎุฏุงู Secrets ูู GitHub Actions
TOKEN = os.environ.get("TELEGRAM_TOKEN")
# ูุงุฆูุฉ ุงูู Chat IDs ููุฌุฑูุจุงุช ุงููุฎุชููุฉ
chat_ids = [
    os.environ.get("CHAT_ID_1"),
    os.environ.get("CHAT_ID_2"),
    os.environ.get("CHAT_ID_3")
    # ูููู ุชุถูู Chat_ID_X ุฌุฏูุฏ ููุง ูุฃู ุฌุฑูุจ ุฅุถุงูู
]
URL = f"https://api.telegram.org/bot{TOKEN}/sendMessage"

def send_message(text, chat_id):
    try:
        response = requests.post(URL, data={"chat_id": chat_id, "text": text})
        if response.status_code == 200:
            print(f"ุชู ุงูุฅุฑุณุงู โ ุฅูู {chat_id}")
        else:
            print(f"ุฎุทุฃ ๐จ ูู {chat_id}: {response.text}")
    except Exception as e:
        print(f"Error: {e}")

def send_long_message(text, chunk_size=3500):
    """ููุณู ุงููุต ุงูุทููู ููุฑุณูู ุนูู ุนุฏุฉ ุฑุณุงุฆู ููู ุฌุฑูุจ"""
    for chunk in textwrap.wrap(text, chunk_size, break_long_words=False, replace_whitespace=False):
        for chat_id in chat_ids:
            if chat_id:
                send_message(chunk, chat_id)

# ๐ ุฃุฐูุงุฑ ุงูุตุจุงุญ
azkar_sabah = """๐ ุฃุฐูุงุฑ ุงูุตุจุงุญ

1. ุขูุฉ ุงููุฑุณู
> ุงูููููู ูุง ุฅูููููู ุฅููููุง ูููู ุงููุญูููู ุงูููููููููู... (ุงูุจูุฑุฉ: 255)

2. ุณูุฑุฉ ุงูุฅุฎูุงุต + ุงูููู + ุงููุงุณ (3 ูุฑุงุช)

3. ุฃุตุจุญูุง ูุฃุตุจุญ ุงูููู ูููุ ูุงูุญูุฏ ูููุ ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ููุ ูู ุงูููู ููู ุงูุญูุฏ ููู ุนูู ูู ุดูุก ูุฏูุฑุ ุฑุจูู ุฃุณุฃูู ุฎูุฑ ูุง ูู ูุฐุง ุงูููู ูุฎูุฑ ูุง ุจุนุฏูุ ูุฃุนูุฐ ุจู ูู ุดุฑ ูุง ูู ูุฐุง ุงูููู ูุดุฑ ูุง ุจุนุฏูุ ุฑุจูู ุฃุนูุฐ ุจู ูู ุงููุณู ูุณูุก ุงูููุจูุฑุ ุฑุจูู ุฃุนูุฐ ุจู ูู ุนุฐุงุจ ูู ุงููุงุฑ ูุนุฐุงุจ ูู ุงููุจุฑ.

4. ุงูููู ุจู ุฃุตุจุญูุงุ ูุจู ุฃูุณููุงุ ูุจู ูุญูุงุ ูุจู ูููุชุ ูุฅููู ุงููุดูุฑ.

5. ุณูุฏ ุงูุงุณุชุบูุงุฑ
ุงูููู ุฃูุช ุฑุจู ูุง ุฅูู ุฅูุง ุฃูุชุ ุฎููุชูู ูุฃูุง ุนุจุฏูุ ูุฃูุง ุนูู ุนูุฏู ููุนุฏู ูุง ุงุณุชุทุนุชุ ุฃุนูุฐ ุจู ูู ุดุฑ ูุง ุตูุนุชุ ุฃุจูุก ูู ุจูุนูุชู ุนูููุ ูุฃุจูุก ุจุฐูุจูุ ูุงุบูุฑ ูู ูุฅูู ูุง ูุบูุฑ ุงูุฐููุจ ุฅูุง ุฃูุช.

6. ุฑุถูุช ุจุงููู ุฑุจููุงุ ูุจุงูุฅุณูุงู ุฏูููุงุ ูุจูุญูุฏ ๏ทบ ูุจููุง. (3 ูุฑุงุช)

7. ุงูููู ุฅูู ุฃุตุจุญุช ุฃุดูุฏู ูุฃุดูุฏ ุญููุฉ ุนุฑุดู ูููุงุฆูุชู ูุฌููุน ุฎููู ุฃูู ุฃูุช ุงููู ูุง ุฅูู ุฅูุง ุฃูุช ูุญุฏู ูุง ุดุฑูู ููุ ูุฃู ูุญูุฏูุง ุนุจุฏู ูุฑุณููู. (4 ูุฑุงุช)

8. ุงูููู ูุง ุฃุตุจุญ ุจู ูู ูุนูุฉ ุฃู ุจุฃุญุฏู ูู ุฎููู ูููู ูุญุฏู ูุง ุดุฑูู ููุ ููู ุงูุญูุฏ ููู ุงูุดูุฑ.

9. ุญุณุจู ุงููู ูุง ุฅูู ุฅูุง ูู ุนููู ุชูููุช ููู ุฑุจ ุงูุนุฑุด ุงูุนุธูู. (7 ูุฑุงุช)

10. ุจุณู ุงููู ุงูุฐู ูุง ูุถุฑ ูุน ุงุณูู ุดูุก ูู ุงูุฃุฑุถ ููุง ูู ุงูุณูุงุก ููู ุงูุณููุน ุงูุนููู. (3 ูุฑุงุช)

11. ุฃุนูุฐ ุจูููุงุช ุงููู ุงูุชุงูุงุช ูู ุดุฑ ูุง ุฎูู. (3 ูุฑุงุช)

12. ุงูููู ุตููู ูุณูู ุนูู ูุจููุง ูุญูุฏ. (10 ูุฑุงุช ุฃู ุฃูุซุฑ)

13. ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ููุ ูู ุงูููู ููู ุงูุญูุฏ ููู ุนูู ูู ุดูุก ูุฏูุฑ. (100 ูุฑุฉ ุฃู ุฃูููุง 10 ูุฑุงุช)
"""

# ๐ ุฃุฐูุงุฑ ุงููุณุงุก
azkar_masaa = """๐ ุฃุฐูุงุฑ ุงููุณุงุก

1. ุขูุฉ ุงููุฑุณู
> ุงูููููู ูุง ุฅูููููู ุฅููููุง ูููู ุงููุญูููู ุงูููููููููู... (ุงูุจูุฑุฉ: 255)

2. ุณูุฑุฉ ุงูุฅุฎูุงุต + ุงูููู + ุงููุงุณ (3 ูุฑุงุช)

3. ุฃูุณููุง ูุฃูุณู ุงูููู ูููุ ูุงูุญูุฏ ูููุ ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ููุ ูู ุงูููู ููู ุงูุญูุฏ ููู ุนูู ูู ุดูุก ูุฏูุฑ. ุฑุจูู ุฃุณุฃูู ุฎูุฑ ูุง ูู ูุฐู ุงููููุฉ ูุฎูุฑ ูุง ุจุนุฏูุงุ ูุฃุนูุฐ ุจู ูู ุดุฑ ูุง ูู ูุฐู ุงููููุฉ ูุดุฑ ูุง ุจุนุฏูุง. ุฑุจูู ุฃุนูุฐ ุจู ูู ุงููุณู ูุณูุก ุงูููุจูุฑ. ุฑุจูู ุฃุนูุฐ ุจู ูู ุนุฐุงุจ ูู ุงููุงุฑ ูุนุฐุงุจ ูู ุงููุจุฑ.

4. ุงูููู ุจู ุฃูุณููุงุ ูุจู ุฃุตุจุญูุงุ ูุจู ูุญูุงุ ูุจู ูููุชุ ูุฅููู ุงููุตูุฑ.

5. ุณูุฏ ุงูุงุณุชุบูุงุฑ
ุงูููู ุฃูุช ุฑุจู ูุง ุฅูู ุฅูุง ุฃูุชุ ุฎููุชูู ูุฃูุง ุนุจุฏูุ ูุฃูุง ุนูู ุนูุฏู ููุนุฏู ูุง ุงุณุชุทุนุชุ ุฃุนูุฐ ุจู ูู ุดุฑ ูุง ุตูุนุชุ ุฃุจูุก ูู ุจูุนูุชู ุนูููุ ูุฃุจูุก ุจุฐูุจูุ ูุงุบูุฑ ูู ูุฅูู ูุง ูุบูุฑ ุงูุฐููุจ ุฅูุง ุฃูุช.

6. ุฑุถูุช ุจุงููู ุฑุจููุงุ ูุจุงูุฅุณูุงู ุฏูููุงุ ูุจูุญูุฏ ๏ทบ ูุจููุง. (3 ูุฑุงุช)

7. ุงูููู ุฅูู ุฃูุณูุช ุฃุดูุฏู ูุฃุดูุฏ ุญููุฉ ุนุฑุดู ูููุงุฆูุชู ูุฌููุน ุฎููู ุฃูู ุฃูุช ุงููู ูุง ุฅูู ุฅูุง ุฃูุช ูุญุฏู ูุง ุดุฑูู ููุ ูุฃู ูุญูุฏูุง ุนุจุฏู ูุฑุณููู. (4 ูุฑุงุช)

8. ุงูููู ูุง ุฃูุณู ุจู ูู ูุนูุฉ ุฃู ุจุฃุญุฏู ูู ุฎููู ูููู ูุญุฏู ูุง ุดุฑูู ููุ ููู ุงูุญูุฏ ููู ุงูุดูุฑ.

9. ุญุณุจู ุงููู ูุง ุฅูู ุฅูุง ูู ุนููู ุชูููุช ููู ุฑุจ ุงูุนุฑุด ุงูุนุธูู. (7 ูุฑุงุช)

10. ุจุณู ุงููู ุงูุฐู ูุง ูุถุฑ ูุน ุงุณูู ุดูุก ูู ุงูุฃุฑุถ ููุง ูู ุงูุณูุงุก ููู ุงูุณููุน ุงูุนููู. (3 ูุฑุงุช)

11. ุฃุนูุฐ ุจูููุงุช ุงููู ุงูุชุงูุงุช ูู ุดุฑ ูุง ุฎูู. (3 ูุฑุงุช)

12. ุงูููู ุตููู ูุณูู ุนูู ูุจููุง ูุญูุฏ. (10 ูุฑุงุช ุฃู ุฃูุซุฑ)

13. ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ููุ ูู ุงูููู ููู ุงูุญูุฏ ููู ุนูู ูู ุดูุก ูุฏูุฑ. (100 ูุฑุฉ ุฃู ุฃูููุง 10 ูุฑุงุช)
"""

# โจ ุญุฏูุซ ูุตูุฑ
hadith = """ูุงู ุฑุณูู ุงููู ๏ทบ:
(ุงุญุฑุต ุนูู ูุง ูููุนูุ ูุงุณุชุนู ุจุงููู ููุง ุชุนุฌุฒ)
ุฑูุงู ูุณูู.
"""

if __name__ == "__main__":
    hour = datetime.datetime.now().hour
    message = None

    if hour == 7:        # ููุช ุฃุฐูุงุฑ ุงูุตุจุงุญ
        message = azkar_sabah
    elif hour == 13:     # ููุช ุงูุญุฏูุซ
        message = hadith
    elif hour == 20:     # ููุช ุฃุฐูุงุฑ ุงููุณุงุก
        message = azkar_masaa

    if message:
        send_long_message(message)
    else:
        print("ูุด ููุช ุงูุฑุณุงูุฉ ุญุงููุงู")

